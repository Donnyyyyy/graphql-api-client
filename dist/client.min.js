"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};exports.default=function(a,b){return(void 0===b?{}:b).headers,function(c,g){if("function"!=typeof fetch)throw new Error("fetch is not defined. Perhaps you need a polyfill.");var h=extractFiles(g),j=Object.assign({method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=utf-8"},body:makeBody(c,g,h)},b);return 0<h.length&&delete j.headers["Content-Type"],fetch(a,j).then(function(k){return k.json()}).then(function(k){var l=k.data,m=k.errors;return m&&m.length?Promise.reject(m[0].message):l})}};function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}var extractFiles=function a(b){var c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[];for(var g in b){var h=b[g];"object"==("undefined"==typeof h?"undefined":_typeof(h))&&("File"===h.constructor.name?(b[g]=c.length,c.push(h)):c.push.apply(c,_toConsumableArray(a(h))))}return c},makeBody=function(b,c,g){if(0<g.length){var h=new FormData;h.append("operations","{ \"query\" : "+JSON.stringify(b)+", \"variables\": "+JSON.stringify(c)+" }"),h.append("map","{ \"0\": [\"variables.file\"] }");for(var j=0;j<g.length;j++)h.append(j,g[j]);return h}return JSON.stringify({query:b,variables:c})},__assign=Object.assign||function(a){for(var b,c=1,g=arguments.length;c<g;c++)for(var h in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,h)&&(a[h]=b[h]);return a};